<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê± Mystic Cat Tarot Arcade üîÆ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Press Start 2P', cursive;
            background: #000;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated starfield background */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            background: linear-gradient(135deg, #1a0033 0%, #330066 50%, #1a0033 100%);
            border: 5px solid #ff00ff;
            border-radius: 20px;
            padding: 30px;
            max-width: 1000px;
            width: 100%;
            box-shadow: 0 0 50px #ff00ff, inset 0 0 50px rgba(255, 0, 255, 0.2);
            position: relative;
            z-index: 1;
        }

        h1 {
            text-align: center;
            color: #ffff00;
            margin-bottom: 10px;
            font-size: clamp(1.2em, 4vw, 2em);
            text-shadow: 0 0 10px #ffff00, 0 0 20px #ffff00;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 10px #ffff00, 0 0 20px #ffff00; }
            50% { text-shadow: 0 0 20px #ffff00, 0 0 40px #ffff00; }
        }

        .subtitle {
            text-align: center;
            color: #00ffff;
            margin-bottom: 30px;
            font-size: clamp(0.4em, 2vw, 0.7em);
            text-shadow: 0 0 10px #00ffff;
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 3px solid #00ff00;
            border-radius: 10px;
        }

        .score-item {
            text-align: center;
            color: #00ff00;
            font-size: clamp(0.4em, 2vw, 0.6em);
        }

        .score-value {
            color: #ffff00;
            font-size: 1.5em;
            display: block;
            margin-top: 5px;
        }

        .input-section {
            margin-bottom: 30px;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 4px solid #ff00ff;
            border-radius: 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: clamp(0.5em, 2vw, 0.8em);
            background: #000;
            color: #00ff00;
            margin-bottom: 15px;
            box-shadow: inset 0 0 10px rgba(255, 0, 255, 0.5);
        }

        input[type="text"]:focus {
            outline: none;
            box-shadow: 0 0 20px #ff00ff, inset 0 0 10px rgba(255, 0, 255, 0.5);
        }

        input[type="text"]::placeholder {
            color: #666;
        }

        .arcade-btn {
            width: 100%;
            padding: 20px;
            border: 4px solid #ffff00;
            border-radius: 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: clamp(0.6em, 2vw, 1em);
            cursor: pointer;
            background: linear-gradient(180deg, #ff00ff 0%, #8800ff 100%);
            color: #ffff00;
            text-shadow: 2px 2px #000;
            box-shadow: 0 8px 0 #660066, 0 0 20px #ff00ff;
            position: relative;
            transition: all 0.1s;
        }

        .arcade-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 0 #660066, 0 0 30px #ff00ff;
        }

        .arcade-btn:active:not(:disabled) {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #660066, 0 0 10px #ff00ff;
        }

        .arcade-btn:disabled {
            background: #333;
            border-color: #666;
            cursor: not-allowed;
            box-shadow: 0 8px 0 #222;
        }

        .cards-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
            flex-wrap: wrap;
            perspective: 1000px;
        }

        .card {
            width: 150px;
            height: 250px;
            background: linear-gradient(135deg, #ff00ff 0%, #00ffff 100%);
            border-radius: 10px;
            border: 4px solid #ffff00;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: transform 0.3s;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
            position: relative;
            overflow: hidden;
            animation: cardFloat 3s ease-in-out infinite;
        }

        @keyframes cardFloat {
            0%, 100% { transform: translateY(0px) rotateY(0deg); }
            50% { transform: translateY(-10px) rotateY(5deg); }
        }

        .card:nth-child(2) {
            animation-delay: 0.5s;
        }

        .card:nth-child(3) {
            animation-delay: 1s;
        }

        .card.flipped {
            background: #000;
            border-color: #00ff00;
            animation: flipCard 0.6s ease-in-out;
        }

        @keyframes flipCard {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(90deg); }
            100% { transform: rotateY(0deg); }
        }

        .card:hover {
            transform: translateY(-15px) scale(1.05);
            box-shadow: 0 0 40px rgba(255, 255, 0, 0.8);
        }

        .card-back {
            font-size: 60px;
            text-align: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .card-front {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            text-align: center;
        }

        .card.flipped .card-back {
            display: none;
        }

        .card.flipped .card-front {
            display: flex;
        }

        .card-emoji {
            font-size: 80px;
            margin-bottom: 10px;
            animation: spin 3s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .card-name {
            font-weight: bold;
            font-size: 10px;
            margin-bottom: 5px;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }

        .card-position {
            font-size: 8px;
            color: #ffff00;
            font-style: italic;
        }

        .interpretation {
            background: rgba(0, 0, 0, 0.8);
            border: 4px solid #00ff00;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            line-height: 2;
            display: none;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.5);
        }

        .interpretation.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .interpretation h3 {
            color: #ffff00;
            margin-bottom: 15px;
            font-size: clamp(0.6em, 2vw, 1em);
            text-shadow: 0 0 10px #ffff00;
        }

        .interpretation p {
            color: #00ffff;
            font-size: clamp(0.6em, 2vw, 0.9em);
            line-height: 1.8;
            font-family: 'Courier New', monospace;
        }

        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 4px solid #330066;
            border-top: 4px solid #ff00ff;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spinLoader 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spinLoader {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading p {
            color: #00ffff;
            font-size: clamp(0.4em, 1.5vw, 0.7em);
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.5; }
        }

        .actions {
            display: none;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .actions.show {
            display: flex;
        }

        .new-reading-btn, .exit-btn {
            padding: 15px 30px;
            border: 4px solid;
            border-radius: 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: clamp(0.5em, 1.5vw, 0.7em);
            cursor: pointer;
            transition: all 0.1s;
            flex: 1;
            min-width: 200px;
        }

        .new-reading-btn {
            background: linear-gradient(180deg, #00ff00 0%, #008800 100%);
            border-color: #ffff00;
            color: #000;
            box-shadow: 0 8px 0 #006600, 0 0 20px #00ff00;
        }

        .new-reading-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 0 #006600, 0 0 30px #00ff00;
        }

        .new-reading-btn:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #006600, 0 0 10px #00ff00;
        }

        .exit-btn {
            background: linear-gradient(180deg, #ff0000 0%, #880000 100%);
            border-color: #ffff00;
            color: #ffff00;
            box-shadow: 0 8px 0 #660000, 0 0 20px #ff0000;
        }

        .exit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 0 #660000, 0 0 30px #ff0000;
        }

        .exit-btn:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #660000, 0 0 10px #ff0000;
        }

        .error-msg {
            color: #ff0000;
            text-align: center;
            margin-top: 10px;
            font-size: clamp(0.4em, 1.5vw, 0.6em);
            text-shadow: 0 0 10px #ff0000;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Pixel effect corners */
        .container::before,
        .container::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: #ff00ff;
        }

        .container::before {
            top: -5px;
            left: -5px;
        }

        .container::after {
            bottom: -5px;
            right: -5px;
        }
    </style>
</head>
<body>
    <!-- Starfield background -->
    <div class="stars" id="stars"></div>

    <div class="container">
        <h1>üê± MYSTIC CAT TAROT üîÆ</h1>
        <p class="subtitle">~ ARCADE EDITION ~</p>

        <div class="score-board">
            <div class="score-item">
                READINGS
                <span class="score-value" id="readingsCount">0</span>
            </div>
            <div class="score-item">
                COSMIC ENERGY
                <span class="score-value">‚àû</span>
            </div>
            <div class="score-item">
                MYSTIC LEVEL
                <span class="score-value">‚òÖ‚òÖ‚òÖ</span>
            </div>
        </div>

        <div class="input-section">
            <input type="text" id="questionInput" placeholder="ENTER YOUR QUESTION...">
            <button class="arcade-btn" id="drawBtn">üéÆ DRAW CARDS üéÆ</button>
            <p class="error-msg" id="errorMsg"></p>
        </div>

        <div class="cards-container" id="cardsContainer"></div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>CONSULTING THE COSMIC CATS...</p>
        </div>

        <div class="interpretation" id="interpretation"></div>

        <div class="actions" id="actions">
            <button class="new-reading-btn" id="newReadingBtn">üîÑ NEW READING</button>
            <button class="exit-btn" id="exitBtn">‚ùå EXIT</button>
        </div>
    </div>

    <script>
        // Create starfield
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }
        createStars();

        // Sound effects using Web Audio API
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(type) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            switch(type) {
                case 'click':
                    oscillator.frequency.value = 800;
                    gainNode.gain.value = 0.3;
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.1);
                    break;
                case 'flip':
                    oscillator.frequency.value = 400;
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.3);
                    break;
                case 'success':
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
                    oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
                    gainNode.gain.value = 0.3;
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.3);
                    break;
                case 'error':
                    oscillator.frequency.value = 200;
                    gainNode.gain.value = 0.3;
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.2);
                    break;
            }
        }

        // Complete tarot deck from the PDF - Major Arcana
        const majorArcana = [
            { name: "The Fool", emoji: "üê±", meaning: "New adventures, risk-taking, leap of faith" },
            { name: "The Magician", emoji: "üò∫", meaning: "Action, creativity, manifestation" },
            { name: "The High Priestess", emoji: "üåô", meaning: "Intuition, wisdom, hidden knowledge" },
            { name: "The Empress", emoji: "üëë", meaning: "Abundance, nurturing, creativity" },
            { name: "The Emperor", emoji: "ü¶Å", meaning: "Authority, structure, protection" },
            { name: "The Hierophant", emoji: "üìø", meaning: "Unity, education, commitment" },
            { name: "The Lovers", emoji: "üíï", meaning: "Love, choice, relationships" },
            { name: "The Chariot", emoji: "üèÜ", meaning: "Victory, determination, progress" },
            { name: "Strength", emoji: "üí™", meaning: "Courage, patience, inner strength" },
            { name: "The Hermit", emoji: "üïØÔ∏è", meaning: "Reflection, solitude, wisdom" },
            { name: "Wheel of Fortune", emoji: "üé°", meaning: "Change, cycles, destiny" },
            { name: "Justice", emoji: "‚öñÔ∏è", meaning: "Balance, fairness, truth" },
            { name: "The Hanged Man", emoji: "üôÉ", meaning: "Pause, new perspective, sacrifice" },
            { name: "Death", emoji: "ü¶ã", meaning: "Transformation, endings, beginnings" },
            { name: "Temperance", emoji: "üßò", meaning: "Balance, patience, moderation" },
            { name: "The Devil", emoji: "üòà", meaning: "Bondage, materialism, freedom" },
            { name: "The Tower", emoji: "‚ö°", meaning: "Sudden change, upheaval, revelation" },
            { name: "The Star", emoji: "‚≠ê", meaning: "Hope, inspiration, guidance" },
            { name: "The Moon", emoji: "üåú", meaning: "Illusion, intuition, uncertainty" },
            { name: "The Sun", emoji: "‚òÄÔ∏è", meaning: "Joy, success, vitality" },
            { name: "Judgment", emoji: "üé∫", meaning: "Renewal, reflection, awakening" },
            { name: "The World", emoji: "üåç", meaning: "Completion, achievement, fulfillment" }
        ];

        // Minor Arcana - Wands (Fire - Passion & Creativity)
        const wands = [
            { name: "Ace of Wands", emoji: "üî•", meaning: "New beginnings, inspiration, creative spark" },
            { name: "Two of Wands", emoji: "üéØ", meaning: "Planning, future vision, partnerships" },
            { name: "Three of Wands", emoji: "üåÖ", meaning: "Expansion, foresight, exploration" },
            { name: "Four of Wands", emoji: "üéâ", meaning: "Celebration, harmony, homecoming" },
            { name: "Five of Wands", emoji: "‚öîÔ∏è", meaning: "Competition, conflict, challenges" },
            { name: "Six of Wands", emoji: "üèÖ", meaning: "Victory, success, recognition" },
            { name: "Seven of Wands", emoji: "üõ°Ô∏è", meaning: "Defense, perseverance, courage" },
            { name: "Eight of Wands", emoji: "üí®", meaning: "Swift action, movement, progress" },
            { name: "Nine of Wands", emoji: "üí™", meaning: "Resilience, persistence, boundaries" },
            { name: "Ten of Wands", emoji: "üì¶", meaning: "Burden, responsibility, completion" },
            { name: "Page of Wands", emoji: "üì®", meaning: "Enthusiasm, exploration, discovery" },
            { name: "Knight of Wands", emoji: "üèá", meaning: "Energy, passion, adventure" },
            { name: "Queen of Wands", emoji: "üëë", meaning: "Confidence, determination, independence" },
            { name: "King of Wands", emoji: "ü¶Å", meaning: "Leadership, vision, charisma" }
        ];

        // Minor Arcana - Pentacles (Earth - Material & Security)
        const pentacles = [
            { name: "Ace of Pentacles", emoji: "üí∞", meaning: "New opportunity, prosperity, manifestation" },
            { name: "Two of Pentacles", emoji: "‚öñÔ∏è", meaning: "Balance, adaptability, priorities" },
            { name: "Three of Pentacles", emoji: "üèóÔ∏è", meaning: "Teamwork, collaboration, skill" },
            { name: "Four of Pentacles", emoji: "üè¶", meaning: "Security, control, conservation" },
            { name: "Five of Pentacles", emoji: "‚ùÑÔ∏è", meaning: "Hardship, loss, isolation" },
            { name: "Six of Pentacles", emoji: "ü§ù", meaning: "Generosity, charity, sharing" },
            { name: "Seven of Pentacles", emoji: "üå±", meaning: "Patience, investment, reward" },
            { name: "Eight of Pentacles", emoji: "üî®", meaning: "Diligence, mastery, dedication" },
            { name: "Nine of Pentacles", emoji: "üå∫", meaning: "Luxury, self-sufficiency, abundance" },
            { name: "Ten of Pentacles", emoji: "üè∞", meaning: "Legacy, inheritance, culmination" },
            { name: "Page of Pentacles", emoji: "üìö", meaning: "Ambition, study, manifestation" },
            { name: "Knight of Pentacles", emoji: "üê¢", meaning: "Reliability, routine, commitment" },
            { name: "Queen of Pentacles", emoji: "üåª", meaning: "Nurturing, practicality, comfort" },
            { name: "King of Pentacles", emoji: "üíé", meaning: "Wealth, business, security" }
        ];

        // Minor Arcana - Swords (Air - Thoughts & Challenges)
        const swords = [
            { name: "Ace of Swords", emoji: "‚öîÔ∏è", meaning: "Clarity, breakthrough, truth" },
            { name: "Two of Swords", emoji: "üôà", meaning: "Difficult choices, stalemate, denial" },
            { name: "Three of Swords", emoji: "üíî", meaning: "Heartbreak, sorrow, grief" },
            { name: "Four of Swords", emoji: "üò¥", meaning: "Rest, recovery, contemplation" },
            { name: "Five of Swords", emoji: "üò§", meaning: "Conflict, defeat, win at all costs" },
            { name: "Six of Swords", emoji: "‚õµ", meaning: "Transition, moving on, healing" },
            { name: "Seven of Swords", emoji: "ü•∑", meaning: "Deception, strategy, evasion" },
            { name: "Eight of Swords", emoji: "üîí", meaning: "Restriction, imprisonment, victim" },
            { name: "Nine of Swords", emoji: "üò∞", meaning: "Anxiety, worry, nightmares" },
            { name: "Ten of Swords", emoji: "üó°Ô∏è", meaning: "Endings, betrayal, crisis" },
            { name: "Page of Swords", emoji: "üîç", meaning: "Curiosity, restlessness, mental energy" },
            { name: "Knight of Swords", emoji: "‚ö°", meaning: "Ambition, action, impulsiveness" },
            { name: "Queen of Swords", emoji: "üë∏", meaning: "Independence, perception, clarity" },
            { name: "King of Swords", emoji: "üß†", meaning: "Authority, intellect, truth" }
        ];

        // Minor Arcana - Cups (Water - Emotions & Relationships)
        const cups = [
            { name: "Ace of Cups", emoji: "üíñ", meaning: "New love, emotional awakening, joy" },
            { name: "Two of Cups", emoji: "üíë", meaning: "Partnership, connection, attraction" },
            { name: "Three of Cups", emoji: "ü•≥", meaning: "Celebration, friendship, community" },
            { name: "Four of Cups", emoji: "üòê", meaning: "Apathy, contemplation, reevaluation" },
            { name: "Five of Cups", emoji: "üò¢", meaning: "Loss, regret, disappointment" },
            { name: "Six of Cups", emoji: "üéÅ", meaning: "Nostalgia, memories, reunion" },
            { name: "Seven of Cups", emoji: "‚ú®", meaning: "Choices, illusion, fantasy" },
            { name: "Eight of Cups", emoji: "üö∂", meaning: "Leaving behind, searching, withdrawal" },
            { name: "Nine of Cups", emoji: "üòä", meaning: "Contentment, satisfaction, wishes" },
            { name: "Ten of Cups", emoji: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶", meaning: "Harmony, family, happiness" },
            { name: "Page of Cups", emoji: "üê†", meaning: "Creative, intuitive, dreamy" },
            { name: "Knight of Cups", emoji: "üé®", meaning: "Romance, charm, imagination" },
            { name: "Queen of Cups", emoji: "üßú", meaning: "Compassion, intuition, emotional depth" },
            { name: "King of Cups", emoji: "üåä", meaning: "Emotional balance, control, diplomacy" }
        ];

        // Combine all cards
        const fullTarotDeck = [...majorArcana, ...wands, ...pentacles, ...swords, ...cups];

        const positions = ["Past", "Present", "Future"];
        let drawnCards = [];
        let currentQuestion = "";
        let readingsCount = 0;

        document.getElementById('drawBtn').addEventListener('click', drawCards);
        document.getElementById('newReadingBtn').addEventListener('click', resetReading);
        document.getElementById('exitBtn').addEventListener('click', () => {
            playSound('click');
            if (confirm('EXIT GAME? YOUR PROGRESS WILL BE LOST!')) {
                location.reload();
            }
        });

        // Add click sound to buttons
        document.querySelectorAll('button').forEach(btn => {
            btn.addEventListener('mousedown', () => playSound('click'));
        });

        function showError(message) {
            playSound('error');
            const errorMsg = document.getElementById('errorMsg');
            errorMsg.textContent = message;
            setTimeout(() => {
                errorMsg.textContent = '';
            }, 3000);
        }

        function drawCards() {
            const question = document.getElementById('questionInput').value.trim();
            
            if (!question) {
                showError('ERROR! ENTER QUESTION FIRST!');
                return;
            }

            playSound('success');
            currentQuestion = question;
            
            // Clear previous reading
            document.getElementById('interpretation').classList.remove('show');
            document.getElementById('actions').classList.remove('show');
            document.getElementById('errorMsg').textContent = '';

            // Shuffle and draw 3 unique cards
            const shuffled = [...fullTarotDeck].sort(() => Math.random() - 0.5);
            drawnCards = shuffled.slice(0, 3).map((card, index) => ({
                ...card,
                position: positions[index]
            }));

            displayCards();
        }

        function displayCards() {
            const container = document.getElementById('cardsContainer');
            container.innerHTML = '';

            drawnCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.innerHTML = `
                    <div class="card-back">
                        üêæ<br>?
                    </div>
                    <div class="card-front">
                        <div class="card-emoji">${card.emoji}</div>
                        <div class="card-name">${card.name}</div>
                        <div class="card-position">${card.position}</div>
                    </div>
                `;

                setTimeout(() => {
                    playSound('flip');
                    cardElement.classList.add('flipped');
                    if (index === drawnCards.length - 1) {
                        setTimeout(() => getInterpretation(), 1000);
                    }
                }, (index + 1) * 800);

                container.appendChild(cardElement);
            });
        }

        function getInterpretation() {
            document.getElementById('loading').classList.add('show');

            // Generate interpretation after a delay to simulate loading
            setTimeout(() => {
                const interpretation = generateReading(drawnCards, currentQuestion);
                
                playSound('success');
                document.getElementById('loading').classList.remove('show');
                const interpretationDiv = document.getElementById('interpretation');
                interpretationDiv.innerHTML = `<h3>üîÆ READING COMPLETE üîÆ</h3><p>${interpretation}</p>`;
                interpretationDiv.classList.add('show');
                document.getElementById('actions').classList.add('show');
                
                // Update score
                readingsCount++;
                document.getElementById('readingsCount').textContent = readingsCount;
            }, 2000);
        }

        function generateReading(cards, question) {
            const past = cards[0];
            const present = cards[1];
            const future = cards[2];
            
            // Opening line
            let reading = `GREETINGS, SEEKER! The COSMIC CATS have heard your question about "${question}". `;
            reading += `Let me reveal what the mystical felines see...<br><br>`;
            
            // Past interpretation
            reading += `üåô PAST - ${past.name}:<br>`;
            reading += interpretCard(past, 'past', question) + `<br><br>`;
            
            // Present interpretation
            reading += `‚≠ê PRESENT - ${present.name}:<br>`;
            reading += interpretCard(present, 'present', question) + `<br><br>`;
            
            // Future interpretation
            reading += `‚ú® FUTURE - ${future.name}:<br>`;
            reading += interpretCard(future, 'future', question) + `<br><br>`;
            
            // Synthesis
            reading += `üîÆ THE COSMIC CATS' WISDOM:<br>`;
            reading += generateSynthesis(past, present, future, question);
            
            return reading;
        }

        function interpretCard(card, position, question) {
            const cardName = card.name.toLowerCase();
            const meaning = card.meaning.toLowerCase();
            
            let interpretation = '';
            
            if (position === 'past') {
                if (meaning.includes('new') || meaning.includes('beginning')) {
                    interpretation = `Your journey began with FRESH ENERGY and new possibilities. The seeds you planted then are now bearing fruit.`;
                } else if (meaning.includes('ending') || meaning.includes('transformation')) {
                    interpretation = `You've recently experienced MAJOR CHANGES. What ended has made room for what's coming.`;
                } else if (meaning.includes('challenge') || meaning.includes('conflict')) {
                    interpretation = `Past OBSTACLES tested your strength. You've learned valuable lessons from those struggles.`;
                } else if (meaning.includes('success') || meaning.includes('victory')) {
                    interpretation = `Your PAST ACHIEVEMENTS have built the foundation for your current situation.`;
                } else {
                    interpretation = `The energy of ${card.meaning} has shaped your path to this moment.`;
                }
            } else if (position === 'present') {
                if (meaning.includes('choice') || meaning.includes('decision')) {
                    interpretation = `RIGHT NOW, you stand at a CROSSROADS. The choice you make will determine your path forward.`;
                } else if (meaning.includes('balance') || meaning.includes('harmony')) {
                    interpretation = `Your current challenge is finding EQUILIBRIUM. The cats say: patience brings clarity.`;
                } else if (meaning.includes('action') || meaning.includes('movement')) {
                    interpretation = `The time for ACTION is NOW! The cosmic cats are urging you to move forward with confidence.`;
                } else if (meaning.includes('rest') || meaning.includes('patience')) {
                    interpretation = `This is a time to PAUSE and reflect. Not all progress requires immediate action.`;
                } else if (meaning.includes('challenge') || meaning.includes('conflict')) {
                    interpretation = `You're currently facing TESTS of your resolve. Remember: you're stronger than you think!`;
                } else {
                    interpretation = `Currently, the energy of ${card.meaning} surrounds you. Pay attention to what it teaches.`;
                }
            } else { // future
                if (meaning.includes('success') || meaning.includes('victory')) {
                    interpretation = `The cats see TRIUMPH ahead! Your efforts will be rewarded beyond your expectations.`;
                } else if (meaning.includes('love') || meaning.includes('harmony')) {
                    interpretation = `BEAUTIFUL CONNECTIONS await you. Open your heart to the joy coming your way.`;
                } else if (meaning.includes('change') || meaning.includes('transformation')) {
                    interpretation = `Prepare for EVOLUTION! The future brings positive transformation and growth.`;
                } else if (meaning.includes('abundance') || meaning.includes('prosperity')) {
                    interpretation = `ABUNDANCE flows toward you! The universe is preparing gifts for your journey.`;
                } else if (meaning.includes('wisdom') || meaning.includes('clarity')) {
                    interpretation = `ENLIGHTENMENT awaits! Soon you'll see the bigger picture with crystal clarity.`;
                } else if (meaning.includes('challenge')) {
                    interpretation = `Future challenges will TEST you, but remember: you have the strength to overcome them!`;
                } else {
                    interpretation = `The energy of ${card.meaning} will guide your future path. Trust the journey!`;
                }
            }
            
            return interpretation;
        }

        function generateSynthesis(past, present, future, question) {
            const themes = [past.meaning, present.meaning, future.meaning].join(' ').toLowerCase();
            
            let synthesis = '';
            
            if (themes.includes('love') || themes.includes('relationship')) {
                synthesis = `The cats see a JOURNEY OF THE HEART unfolding. What began in the past is transforming into something deeper. Trust your feelings and stay open to connection. MEOW! üíï`;
            } else if (themes.includes('success') || themes.includes('victory')) {
                synthesis = `Your path leads to ACHIEVEMENT! The struggles of the past have prepared you for the victories ahead. Keep pushing forward with confidence! PURR! üèÜ`;
            } else if (themes.includes('change') || themes.includes('transformation')) {
                synthesis = `The cosmic cats see you in a time of METAMORPHOSIS. Embrace the changes - they're leading you exactly where you need to be. Trust the process! ‚ú®`;
            } else if (themes.includes('wisdom') || themes.includes('clarity')) {
                synthesis = `This reading reveals a path of ENLIGHTENMENT. Pay attention to your intuition - the answers you seek are already within you. The cats are guiding your inner knowing! üåô`;
            } else if (themes.includes('challenge') || themes.includes('conflict')) {
                synthesis = `The journey may have OBSTACLES, but remember: every challenge makes you STRONGER. The cats believe in your resilience. You've got this! üí™`;
            } else {
                synthesis = `The mystical cats have shown you the path from past to future. Each card connects to reveal your UNIQUE JOURNEY. Trust in the cosmic flow and follow your instincts! üê±‚ú®`;
            }
            
            synthesis += `<br><br>The reading is COMPLETE! May the wisdom of the COSMIC CATS guide your path! üîÆ`;
            
            return synthesis;
        }

        function resetReading() {
            playSound('click');
            document.getElementById('questionInput').value = '';
            document.getElementById('cardsContainer').innerHTML = '';
            document.getElementById('interpretation').classList.remove('show');
            document.getElementById('actions').classList.remove('show');
            drawnCards = [];
            currentQuestion = '';
        }
    </script>
</body>
</html>
